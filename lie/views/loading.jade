extends layout

block content
	img.loading(src='/img/loading.jpg')
	img.loadingbar1(src='/img/loadingbar1.png')
	img.loadingbar2(src='/img/loadingbar2.png')
	img.loadingbar3(src='/img/loadingbar3.png')
	img.loadingbar4(src='/img/loadingbar4.png')
	style.
		img.loading{
			position:absolute;
			margin-left: auto;
			margin-right: auto;
			left: 0;
			right: 0;
			width:100%;
			height:100vh;
		}
		.loadingbar1, .loadingbar2, .loadingbar3, .loadingbar4{
			display:none;
			position:absolute;
			z-index:99;
			margin-left: auto;
			margin-right: auto;
			left: 0;
			right: 0;
			top:50%;
		}
	script.
		$(document).ready(function(){
			$.get('/calculate',function(data){
				$.get('/uploadtoimgur',function(data){
					$.get('/makeqrcode',function(data){
						window.location='/share';
					});
				});
			});
			function loadingbar(){
				$('.loadingbar1').hide();
				$('.loadingbar2').hide();
				$('.loadingbar3').hide();
				$('.loadingbar4').hide();
				$('.loadingbar1').show();
				$('.loadingbar2').delay(1000).show(0);
				$('.loadingbar3').delay(2000).show(0);
				$('.loadingbar4').delay(3000).show(0);
			}
			loadingbar();
			setInterval(loadingbar, 4000);
		});